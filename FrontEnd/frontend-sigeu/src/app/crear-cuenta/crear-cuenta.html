<div class="limiter">
  <div class="container-login100">
    <div class="wrap-login100">
      <div class="login100-pic js-tilt" data-tilt>
        <img src="assets/images/img-01.png" alt="IMG" />
      </div>

      <form class="login100-form validate-form" (ngSubmit)="registrar()" #form="ngForm" novalidate>
        <span class="login100-form-title">Crear cuenta</span>

        <!-- Identificación -->
        <div class="wrap-input100">
          <label class="label-input100" for="identificacion">Identificación</label>
          <input class="input100" type="number" id="identificacion" name="identificacion" placeholder="Identificación"
                 [(ngModel)]="usuario.identificacion" required />
          <span class="focus-input100"></span>
          <span class="symbol-input100"><i class="fa fa-user" aria-hidden="true"></i></span>
        </div>

        <!-- Nombre -->
        <div class="wrap-input100">
          <label class="label-input100" for="nombre">Nombre(s)</label>
          <input class="input100" type="text" id="nombre" name="nombre" placeholder="Nombre"
                 [(ngModel)]="usuario.nombre" required />
          <span class="focus-input100"></span>
          <span class="symbol-input100"><i class="fa fa-user" aria-hidden="true"></i></span>
        </div>

        <!-- Apellido -->
        <div class="wrap-input100">
          <label class="label-input100" for="apellido">Apellido(s)</label>
          <input class="input100" type="text" id="apellido" name="apellido" placeholder="Apellido"
                 [(ngModel)]="usuario.apellido" required />
          <span class="focus-input100"></span>
          <span class="symbol-input100"><i class="fa fa-user" aria-hidden="true"></i></span>
        </div>

        <!-- Correo institucional -->
        <div class="wrap-input100">
          <label class="label-input100" for="correo">Correo institucional</label>
          <input class="input100" type="email" id="correo" name="correo" placeholder="Correo institucional"
                 [(ngModel)]="usuario.correo" required />
          <span class="focus-input100"></span>
          <span class="symbol-input100"><i class="fa fa-envelope" aria-hidden="true"></i></span>
        </div>

        <!-- Contraseña -->
        <div class="wrap-input100">
          <label class="label-input100" for="contrasena">Contraseña</label>
          <input class="input100" type="password" id="contrasena" name="contrasena" placeholder="Contraseña"
                 [(ngModel)]="usuario.contrasena" required />
          <span class="focus-input100"></span>
          <span class="symbol-input100"><i class="fa fa-lock" aria-hidden="true"></i></span>
        </div>

        <!-- Confirmar contraseña -->
        <div class="wrap-input100">
          <label class="label-input100" for="confirmar_contrasena">Confirmar contraseña</label>
          <input class="input100" type="password" id="confirmar_contrasena" name="confirmar_contrasena"
                 placeholder="Confirmar contraseña" [(ngModel)]="usuario.confirmar_contrasena" required />
          <span class="focus-input100"></span>
          <span class="symbol-input100"><i class="fa fa-lock" aria-hidden="true"></i></span>
        </div>

        <!-- Rol a ejercer -->
        <div class="wrap-input100">
          <label class="label-input100" for="rol">Rol a ejercer</label>
          <div class="input100" style="padding:0;">
            <select name="rol" id="rol" class="input100" [(ngModel)]="usuario.rol" (change)="onRolChange(getSelectValue($event))">
              <option value="estudiante">Estudiante</option>
              <option value="docente">Docente</option>
              <option value="secretaria">Secretaría Academica</option>
            </select>
          </div>
          <span class="focus-input100"></span>
          <span class="symbol-input100"><i class="fa fa-briefcase" aria-hidden="true"></i></span>
        </div>

        <!-- Campos adicionales según rol -->
        <ng-container [ngSwitch]="usuario.rol">
          <!-- Estudiante -->
          <div *ngSwitchCase="'estudiante'">
            <div class="wrap-input100">
              <label class="label-input100" for="codigo">Código</label>
              <input class="input100" type="number" id="codigo" name="codigo"
                    placeholder="Código (numérico)" [(ngModel)]="usuario.codigo" />
              <span class="focus-input100"></span>
              <span class="symbol-input100"><i class="fa fa-pencil" aria-hidden="true"></i></span>
            </div>
            <div class="wrap-input100">
              <label class="label-input100" for="programa">Programa académico</label>
              <div class="input100" style="padding:0;">
                <select id="programa" name="programa" class="input100"
                        [(ngModel)]="usuario.codigoPrograma">
                  <option [ngValue]="''">Seleccione un programa</option>
                  <option *ngFor="let p of programas" [ngValue]="p.codigo">{{ p.nombre }}</option>
                </select>
              </div>
              <span class="focus-input100"></span>
              <span class="symbol-input100"><i class="fa fa-pencil" aria-hidden="true"></i></span>
            </div>
          </div>
          <!-- Docente -->
          <div *ngSwitchCase="'docente'">
            <div class="wrap-input100">
              <label class="label-input100" for="unidad_academica">Unidad Académica</label>
              <div class="input100" style="padding:0;">
                <select id="unidad_academica" name="unidad_academica" class="input100"
                        [(ngModel)]="usuario.codigoUnidad">
                  <option [ngValue]="''">Seleccione una unidad</option>
                  <option *ngFor="let u of unidades" [ngValue]="u.codigo">{{ u.nombre }}</option>
                </select>
              </div>
              <span class="focus-input100"></span>
              <span class="symbol-input100"><i class="fa fa-pencil" aria-hidden="true"></i></span>
            </div>
          </div>
          <!-- Secretaria -->
          <div *ngSwitchCase="'secretaria'">
            <div class="wrap-input100">
              <label class="label-input100" for="facultad">Facultad</label>
              <div class="input100" style="padding:0;">
                <select id="facultad" name="facultad" class="input100"
                        [(ngModel)]="usuario.idFacultad">
                  <option [ngValue]="''">Seleccione una facultad</option>
                  <option *ngFor="let f of facultades" [ngValue]="f.id">{{ f.nombre }}</option>
                </select>
              </div>
              <span class="focus-input100"></span>
              <span class="symbol-input100"><i class="fa fa-pencil" aria-hidden="true"></i></span>
            </div>
          </div>
        </ng-container>

         <div class="container-login100-form-btn">
          <button class="login100-form-btn" type="submit">Crear cuenta</button>
        </div>

        <div class="text-center p-t-12">
          <span class="txt1">¿Ya tienes cuenta?</span>
          <a class="txt2" routerLink="/login">Inicia sesión</a>
        </div>

        <div *ngIf="mensaje" class="mensaje-registro" [ngStyle]="{ color: esError ? '#dc2626' : '#059669' }">
          {{ mensaje }}
        </div>
      </form>
    </div>
  </div>
</div>